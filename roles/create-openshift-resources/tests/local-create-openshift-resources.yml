---
# To run this test, you need to pass in the openshift password
# e.g. ansible-playbook local-create-ose-project.yml -i inventory -e "openshift_password=your_password"

- name: "Create test resources"
  hosts: localhost
  
  vars_files:
    - openshift_resources.json
  
# roles under test      
  roles:
    - openshift-defaults
    - create-openshift-resources

# cleanup
  post_tasks:
  - name: "Remove project {{ item.name }}"
    command: >
      {{ openshift.common.client_binary }} delete project {{ item.name  }}
    when: '"{{ item.name }}" != "ci"'
    with_items: '{{ openshift_resources_to_create.projects }}'